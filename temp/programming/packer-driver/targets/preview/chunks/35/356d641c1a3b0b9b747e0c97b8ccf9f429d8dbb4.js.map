{"version":3,"sources":["file:///E:/CocosCreator/StormSunder_Github/StormSunder/assets/core_tgx/easy_ui_framework/alert/UIAlert.ts"],"names":["UIAlertOptions","UIAlert","UIController","UIMgr","_title","_type","_content","_showCancel","_cbClick","_cbClickThisArg","setTitle","title","setType","type","onClick","cb","thisArg","_options","show","content","showCancel","opts","inst","showUI","alert","init","options","layout","hasOwnProperty","string","btnCancel","node","active","pos","btnOK","position","setPosition","y","z","showAlerType","onCreated","onButtonEvent","hide","call","fillUp","remove","refresh"],"mappings":"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","sourcesContent":["import { UIController } from \"../UIController\";\nimport { UIMgr } from \"../UIMgr\";\nimport { Layout_UIAlert } from \"./Layout_UIAlert\";\n\nexport class UIAlertOptions {\n    private _title?: string;\n    private _type?: string;\n    private _content?: string;\n    private _showCancel?: boolean;\n    private _cbClick?: Function;\n    private _cbClickThisArg?: Function;\n\n    setTitle(title: string): UIAlertOptions {\n        this._title = title;\n        return this;\n    }\n\n    setType(type: string): UIAlertOptions {\n        this._type = type;\n        return this;\n    }\n\n    onClick(cb: (isOK: boolean) => void, thisArg?: any): UIAlertOptions {\n        this._cbClick = cb;\n        this._cbClickThisArg = thisArg;\n        return this;\n    }\n}\n\nexport class UIAlert extends UIController {\n    private _options: UIAlertOptions;\n\n    public static show(content: string, type: string, showCancel?: boolean): UIAlertOptions {\n        let opts = new UIAlertOptions() as any;\n        opts._type = type;\n        opts._content = content;\n        opts._showCancel = showCancel;\n        UIMgr.inst.showUI(UIAlert, (alert: UIAlert) => {\n            alert.init(opts);\n        }) as UIAlert;\n        return opts;\n    }\n\n    private init(opts: UIAlertOptions) {\n        this._options = opts;\n        let options = this._options as any as { _title: string, _type: string, _content: string, _showCancel: boolean };\n        let layout = this.layout as Layout_UIAlert;\n        if (options.hasOwnProperty('title')) {\n            layout.title.string = options._title || '';\n        }\n\n        layout.content.string = options._content || '';\n        layout.btnCancel.node.active = options._showCancel;\n        if (!options._showCancel) {\n            let pos = layout.btnOK.node.position;\n            layout.btnOK.node.setPosition(0, pos.y, pos.z);\n        }\n\n        this.showAlerType(options._type);\n    }\n\n    protected onCreated(): void {\n        let layout = this.layout as Layout_UIAlert;\n        this.onButtonEvent(layout.btnOK, () => {\n            this.hide();\n            let options = this._options as any as { _cbClick: Function, _cbClickThisArg: any };\n            if (options._cbClick) {\n                options._cbClick.call(options._cbClickThisArg, true);\n            }\n        });\n\n        this.onButtonEvent(layout.btnCancel, () => {\n            this.hide();\n            let options = this._options as any as { _cbClick: Function, _cbClickThisArg: any };\n            if (options._cbClick) {\n                options._cbClick.call(options._cbClickThisArg, false);\n            }\n        });\n    }\n\n    private showAlerType(type: String): void {\n        let layout = this.layout as Layout_UIAlert;\n        layout.fillUp.active = false;\n        layout.remove.active = false;\n        layout.refresh.active = false;\n\n        switch (type) {\n            case \"FillUp\":\n                layout.fillUp.active = true;\n                break;\n            case \"Remove\":\n                layout.remove.active = true;\n                break;\n            case \"Refresh\":\n                layout.refresh.active = true;\n                break;\n        }\n\n    }\n}"]}