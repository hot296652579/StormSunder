{"version":3,"sources":["file:///E:/CocosCreator/StormSunder_Github/StormSunder/assets/core_tgx/easy_ui_framework/tips/UITips.ts"],"names":["UITipsOptions","UITips","tween","Tween","UIOpacity","UITransform","Vec3","UIController","UIMgr","_content","setTitle","content","_curOpacity","_curPositon","_transform","_options","_time","show","opts","inst","showUI","alert","init","options","layout","hasOwnProperty","string","onCreated","node","getComponent","fadeIn","runTimeOut","time","self","delay","call","fadeOut","start","stopAllByTarget","opacity","to","setPosition","position","y","height","stopAllActions","removeFromParent","moveTo","x","set","onUpdate","target","easing"],"mappings":"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","sourcesContent":["import { tween, Tween, UIOpacity, UITransform, Vec3 } from \"cc\";\r\nimport { UIController } from \"../UIController\";\r\nimport { UIMgr } from \"../UIMgr\";\r\nimport { Layout_UITips } from \"./Layout_UITips\";\r\n\r\nexport class UITipsOptions {\r\n    private _content?: string;\r\n\r\n    setTitle(content: string): UITipsOptions {\r\n        this._content = content;\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nexport class UITips extends UIController {\r\n    private _curOpacity: UIOpacity | null = null;\r\n    private _curPositon = new Vec3;\r\n    private _transform: UITransform = null!;\r\n    private _options: UITipsOptions;\r\n    private _time: number = 1;\r\n\r\n    public static show(content: string): UITipsOptions {\r\n        let opts = new UITipsOptions() as any;\r\n        opts._content = content;\r\n        UIMgr.inst.showUI(UITips, (alert: UITips) => {\r\n            alert.init(opts);\r\n        }) as UITips;\r\n        return opts;\r\n    }\r\n\r\n    private init(opts: UITipsOptions) {\r\n        this._options = opts;\r\n        let options = this._options as any as { _content: string };\r\n        let layout = this.layout as Layout_UITips;\r\n        if (options.hasOwnProperty('_content')) {\r\n            layout.content.string = options._content || '';\r\n        }\r\n    }\r\n\r\n    protected onCreated(): void {\r\n        this._curOpacity = this.node.getComponent(UIOpacity);\r\n        this._transform = this.node.getComponent(UITransform) as UITransform;\r\n        this.fadeIn();\r\n        this.runTimeOut(this._time);\r\n    }\r\n\r\n    private runTimeOut(time: number) {\r\n        let self = this;\r\n        tween(this.node).delay(time).call(() => {\r\n            self.fadeOut();\r\n        }).start();\r\n    }\r\n\r\n    public fadeIn() {\r\n        if (!this._curOpacity) return;\r\n        Tween.stopAllByTarget(this._curOpacity);\r\n        this._curOpacity.opacity = 0;\r\n        tween(this._curOpacity)\r\n            .to(0.5, { opacity: 255 })\r\n            .start();\r\n        // this.moveTo(0, this.node.position.y + this._transform.height * 2);\r\n        this.node.setPosition(0, this.node.position.y + this._transform.height * 4);\r\n    }\r\n\r\n    public fadeOut() {\r\n        if (!this._curOpacity) return;\r\n        Tween.stopAllByTarget(this._curOpacity);\r\n        tween(this._curOpacity)\r\n            .to(2, { opacity: 0 })\r\n            .call(() => {\r\n                this.stopAllActions();\r\n                this.node?.removeFromParent();\r\n            })\r\n            .start();\r\n        // this.moveTo(0, this.node.position.y + this._transform.height * 2);\r\n    }\r\n\r\n    public moveTo(x: number, y: number) {\r\n        Tween.stopAllByTarget(this._curPositon);\r\n        this._curPositon.set(this.node.position);\r\n        tween(this._curPositon).to(0.5, { x: x, y: y }, {\r\n            onUpdate: (target) => {\r\n                this.node?.setPosition(target as Vec3);\r\n            }, easing: \"expoOut\"\r\n        }).start();\r\n    }\r\n\r\n    public stopAllActions(): void {\r\n        Tween.stopAllByTarget(this.node);\r\n        Tween.stopAllByTarget(this._curPositon);\r\n        if (this._curOpacity) {\r\n            Tween.stopAllByTarget(this._curOpacity);\r\n        }\r\n    }\r\n}"]}