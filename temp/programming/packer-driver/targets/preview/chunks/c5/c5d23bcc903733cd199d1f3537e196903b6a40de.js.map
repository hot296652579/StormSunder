{"version":3,"sources":["file:///E:/CocosCreator/StormSunder_Github/StormSunder/assets/core_tgx/base/GtagMgr.ts"],"names":["GtagMgr","gtag","inst","_inst","init","window","console","log","warn","doGameDot","_events","value","GtagType","game_start","document","title","level_start","level","level_end","ad_error"],"mappings":";;;iBACaA,O;;;;;;;;;;;;;AADb;yBACaA,O,GAAN,MAAMA,OAAN,CAAc;AAAA;AAAA,eAGTC,IAHS,GAGG,IAHH;AAAA;;AAIK,mBAAJC,IAAI,GAAY;AAC9B,cAAI,CAAC,KAAKC,KAAV,EAAiB;AACb,iBAAKA,KAAL,GAAa,IAAIH,OAAJ,EAAb;AACH;;AACD,iBAAO,KAAKG,KAAZ;AACH;;AAEMC,QAAAA,IAAI,GAAG;AACV;AACA,cAAI,OAAOC,MAAM,CAACJ,IAAd,KAAuB,UAA3B,EAAuC;AACnCK,YAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EADmC,CAEnC;;AACA,iBAAKN,IAAL,GAAYI,MAAM,CAACJ,IAAnB;AACH,WAJD,MAIO;AACHK,YAAAA,OAAO,CAACE,IAAR,CAAa,wBAAb;AACH;AACJ;;AAEMC,QAAAA,SAAS,CAACC,OAAD,EAAUC,KAAV,EAAkB;AAC9B,cAAI,CAAC,KAAKV,IAAV,EAAgB;AACZK,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA;AACH;;AACD,cAAIG,OAAO,KAAKE,QAAQ,CAACC,UAAzB,EAAqC;AACjCP,YAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,iBAAKN,IAAL,CAAU,OAAV,EAAmBS,OAAnB,EAA4B;AACxB,2BAAaI,QAAQ,CAACC;AADE,aAA5B;AAGH;;AAED,cAAIL,OAAO,KAAKE,QAAQ,CAACI,WAAzB,EAAsC;AAClC,iBAAKf,IAAL,CAAU,OAAV,EAAmBS,OAAnB,EAA4B;AACxB,4BAAcC,KAAK,CAACM,KADI;AAExB,2BAAaH,QAAQ,CAACC;AAFE,aAA5B;AAKH;;AACD,cAAIL,OAAO,KAAKE,QAAQ,CAACM,SAAzB,EAAoC;AAChC,iBAAKjB,IAAL,CAAU,OAAV,EAAmBS,OAAnB,EAA4B;AACxB,4BAAcC,KAAK,CAACM,KADI;AAExB,yBAAW,eAFa;AAGxB,2BAAaH,QAAQ,CAACC;AAHE,aAA5B;AAKH;;AAED,cAAIL,OAAO,KAAKE,QAAQ,CAACO,QAAzB,EAAmC;AAC/B,iBAAKlB,IAAL,CAAU,OAAV,EAAmBS,OAAnB,EAA4B;AACxB,2BAAaI,QAAQ,CAACC;AADE,aAA5B;AAIH;AACJ;;AAvDgB,O;;AAARf,MAAAA,O,CAEMG,K,GAAiB,I;;0BAwDvBS,Q,GAAW;AACpBC,QAAAA,UAAU,EAAE,YADQ;AAEpBG,QAAAA,WAAW,EAAE,aAFO;AAGpBE,QAAAA,SAAS,EAAE,WAHS;AAIpBC,QAAAA,QAAQ,EAAE;AAJU,O","sourcesContent":["/** 上报管理器*/\nexport class GtagMgr {\n\n    private static _inst: GtagMgr = null;\n    private gtag: any = null;\n    public static get inst(): GtagMgr {\n        if (!this._inst) {\n            this._inst = new GtagMgr();\n        }\n        return this._inst;\n    }\n\n    public init() {\n        //@ts-ignore\n        if (typeof window.gtag === 'function') {\n            console.log('gtag is available.');\n            //@ts-ignore\n            this.gtag = window.gtag;\n        } else {\n            console.warn('gtag is not available.');\n        }\n    }\n\n    public doGameDot(_events, value?) {\n        if (!this.gtag) {\n            console.log('gtag获取失败 无法上报!');\n            return;\n        }\n        if (_events === GtagType.game_start) {\n            console.log('gtag上报游戏开始!');\n            this.gtag('event', _events, {\n                'game_name': document.title\n            })\n        }\n\n        if (_events === GtagType.level_start) {\n            this.gtag('event', _events, {\n                'level_name': value.level,\n                'game_name': document.title\n\n            })\n        }\n        if (_events === GtagType.level_end) {\n            this.gtag('event', _events, {\n                'level_name': value.level,\n                'success': 'level success',\n                'game_name': document.title\n            })\n        }\n\n        if (_events === GtagType.ad_error) {\n            this.gtag('event', _events, {\n                'game_name': document.title\n\n            })\n        }\n    }\n}\n\nexport const GtagType = {\n    game_start: \"game_start\",\n    level_start: \"level_start\",\n    level_end: \"level_end\",\n    ad_error: \"ad_error\",\n}"]}