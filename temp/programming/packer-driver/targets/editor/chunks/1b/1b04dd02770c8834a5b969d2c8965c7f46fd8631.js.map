{"version":3,"sources":["file:///E:/CocosCreator/StormSunder_Github/StormSunder/assets/core_tgx/easy_adapter/AdapterView.ts"],"names":["v3","_decorator","EDITOR","Adapter","ccclass","property","executeInEditMode","menu","AdapterView","onChangeSize","safeArea","node","isFullScreenAdaption","width","designPxToScreenPxRatio","height","safe","direction","LandscapeLeft","setPosition","outside","LandscapeRight","Portrait","UpsideDown","console","log","doOnAdapterComplete"],"mappings":";;;;;;;;;;;;;;;;AAGSA,MAAAA,E,OAAAA,E;AAAIC,MAAAA,U,OAAAA,U;;AACJC,MAAAA,M,UAAAA,M;;AACAC,MAAAA,O,iBAAAA,O;;;;;;AALT;AACA;;;;;OAOM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA,iBAArB;AAAwCC,QAAAA;AAAxC,O,GAAiDN,U;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;yBAIqBO,W,WAHpBJ,OAAO,CAAC,aAAD,C,UACPE,iBAAiB,CAAC,IAAD,C,UACjBC,IAAI,CAAC,uBAAD,C,8CAFL,MAGqBC,WAHrB;AAAA;AAAA,8BAGiD;AAEnCC,QAAAA,YAAY,GAAG;AACrB;AAAA;AAAA,kCAAQC,QAAR,GAAmB,IAAnB;;AACA,cAAI,KAAKC,IAAT,EAAe;AACX,gBAAI,KAAKC,oBAAT,EAA+B;AAC3B;AACA,mBAAKC,KAAL,GAAa;AAAA;AAAA,sCAAQH,QAAR,CAAiBG,KAAjB,GAAyB;AAAA;AAAA,sCAAQH,QAAR,CAAiBI,uBAAvD;AACA,mBAAKC,MAAL,GAAc;AAAA;AAAA,sCAAQL,QAAR,CAAiBK,MAAjB,GAA0B;AAAA;AAAA,sCAAQL,QAAR,CAAiBI,uBAAzD;AACH,aAJD,MAIO;AACH;AACA,mBAAKD,KAAL,GAAa;AAAA;AAAA,sCAAQH,QAAR,CAAiBM,IAAjB,CAAsBH,KAAtB,GAA8B;AAAA;AAAA,sCAAQH,QAAR,CAAiBI,uBAA5D;AACA,mBAAKC,MAAL,GAAc;AAAA;AAAA,sCAAQL,QAAR,CAAiBM,IAAjB,CAAsBD,MAAtB,GAA+B;AAAA;AAAA,sCAAQL,QAAR,CAAiBI,uBAA9D;;AAEA,sBAAQ,KAAKG,SAAb;AACI,qBAAK;AAAA;AAAA,wCAAQA,SAAR,CAAkBC,aAAvB;AACI,uBAAKP,IAAL,CAAUQ,WAAV,CAAsBnB,EAAE,CAAC;AAAA;AAAA,0CAAQU,QAAR,CAAiBU,OAAjB,CAAyBP,KAAzB,GAAiC;AAAA;AAAA,0CAAQH,QAAR,CAAiBI,uBAAnD,EAA4E,CAA5E,CAAxB;AACA;;AACJ,qBAAK;AAAA;AAAA,wCAAQG,SAAR,CAAkBI,cAAvB;AACI,uBAAKV,IAAL,CAAUQ,WAAV,CAAsBnB,EAAE,CAAC,CAAC;AAAA;AAAA,0CAAQU,QAAR,CAAiBU,OAAjB,CAAyBP,KAA1B,GAAkC;AAAA;AAAA,0CAAQH,QAAR,CAAiBI,uBAApD,EAA6E,CAA7E,CAAxB;AACA;;AACJ,qBAAK;AAAA;AAAA,wCAAQG,SAAR,CAAkBK,QAAvB;AACI,uBAAKX,IAAL,CAAUQ,WAAV,CAAsBnB,EAAE,CAAC,CAAD,EAAI,CAAC;AAAA;AAAA,0CAAQU,QAAR,CAAiBU,OAAjB,CAAyBL,MAA1B,GAAmC;AAAA;AAAA,0CAAQL,QAAR,CAAiBI,uBAAxD,CAAxB;AACA;;AACJ,qBAAK;AAAA;AAAA,wCAAQG,SAAR,CAAkBM,UAAvB;AACI,uBAAKZ,IAAL,CAAUQ,WAAV,CAAsBnB,EAAE,CAAC,CAAD,EAAI;AAAA;AAAA,0CAAQU,QAAR,CAAiBU,OAAjB,CAAyBL,MAAzB,GAAkC;AAAA;AAAA,0CAAQL,QAAR,CAAiBI,uBAAvD,CAAxB;AACA;;AACJ;AACI,mBAACZ,MAAD,IAAWsB,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAAX;AACA,uBAAKd,IAAL,CAAUQ,WAAV,CAAsBnB,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAxB;AACA;AAhBR;AAkBH;;AACD,iBAAK0B,mBAAL;AACH;AACJ;;AAnC4C,O","sourcesContent":["/**\r\n */\r\n\r\nimport { v3, _decorator, UITransform } from \"cc\";\r\nimport { EDITOR } from \"cc/env\";\r\nimport { Adapter } from \"./Adapter\";\r\nimport { Console } from \"console\";\r\n\r\nconst { ccclass, property, executeInEditMode, menu } = _decorator;\r\n/**\r\n * 全屏适配\r\n * 用法：\r\n *\r\n * 1. 将本组件挂载在节点上即可（注意该节点不能挂在 Widget 组件）\r\n * 2. 3.x版本引擎旋转时不会触屏旋转事件，所以目前只能设置一个方向才是正常的\r\n *\r\n * 适配原理：\r\n *\r\n * 1. 将节点的宽高设置为安全区域的宽高\r\n */\r\n@ccclass(\"AdapterView\")\r\n@executeInEditMode(true)\r\n@menu(\"Quick适配组件/AdapterView\")\r\nexport default class AdapterView extends Adapter {\r\n\r\n    protected onChangeSize() {\r\n        Adapter.safeArea = null as any;\r\n        if (this.node) {\r\n            if (this.isFullScreenAdaption) {\r\n                // 将屏幕尺寸下的大小，转换为设计分辨率下的大小，重新给节点设置大小\r\n                this.width = Adapter.safeArea.width / Adapter.safeArea.designPxToScreenPxRatio;\r\n                this.height = Adapter.safeArea.height / Adapter.safeArea.designPxToScreenPxRatio;\r\n            } else {\r\n                // 将屏幕尺寸下的安全区域大小，转换为设计分辨率下的大小，重新给节点设置大小\r\n                this.width = Adapter.safeArea.safe.width / Adapter.safeArea.designPxToScreenPxRatio;\r\n                this.height = Adapter.safeArea.safe.height / Adapter.safeArea.designPxToScreenPxRatio;\r\n\r\n                switch (this.direction) {\r\n                    case Adapter.direction.LandscapeLeft:\r\n                        this.node.setPosition(v3(Adapter.safeArea.outside.width / Adapter.safeArea.designPxToScreenPxRatio, 0));\r\n                        break;\r\n                    case Adapter.direction.LandscapeRight:\r\n                        this.node.setPosition(v3(-Adapter.safeArea.outside.width / Adapter.safeArea.designPxToScreenPxRatio, 0));\r\n                        break;\r\n                    case Adapter.direction.Portrait:\r\n                        this.node.setPosition(v3(0, -Adapter.safeArea.outside.height / Adapter.safeArea.designPxToScreenPxRatio));\r\n                        break;\r\n                    case Adapter.direction.UpsideDown:\r\n                        this.node.setPosition(v3(0, Adapter.safeArea.outside.height / Adapter.safeArea.designPxToScreenPxRatio));\r\n                        break;\r\n                    default:\r\n                        !EDITOR && console.log('获取不到设备方向，直接居中处理');\r\n                        this.node.setPosition(v3(0, 0));\r\n                        break;\r\n                }\r\n            }\r\n            this.doOnAdapterComplete();\r\n        }\r\n    }\r\n}\r\n"]}