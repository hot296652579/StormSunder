{"version":3,"sources":["file:///E:/CocosCreator/StormSunder_Github/StormSunder/assets/module_extra/ui_setting/UI_Setting_Impl.ts"],"names":["UI_Setting_Impl","AudioMgr","tgxModuleContext","GameUILayers","UI_Setting","Layout_Setting","StormSunderAudioMgr","constructor","POPUP","getRes","onCreated","layout","onButtonEvent","btnClose","playOneShot","getMusicIdName","hide","initilizeUI","musicToggle","soundToggle","node","on","musicSwitch","soundSwitch","bgMusicEnabled","soundEffectsEnabled","inst","toggleBgMusic","isChecked","toggle","toggleSoundEffects","attachImplClass"],"mappings":";;;0KASaA,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAPJC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,gB,iBAAAA,gB;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,mB,iBAAAA,mB;;;;;;;;;iCAEIN,e,GAAN,MAAMA,eAAN;AAAA;AAAA,oCAAyC;AAC5CO,QAAAA,WAAW,GAAG;AACV,gBAAM,uBAAN,EAA+B;AAAA;AAAA,4CAAaC,KAA5C;AAAA;AAAA;AACH;;AAEMC,QAAAA,MAAM,GAAO;AAChB,iBAAO,EAAP;AACH;;AAESC,QAAAA,SAAS,GAAS;AACxB,cAAIC,MAAM,GAAG,KAAKA,MAAlB;AACA,eAAKC,aAAL,CAAmBD,MAAM,CAACE,QAA1B,EAAoC,MAAM;AACtC;AAAA;AAAA,4DAAoBC,WAApB,CAAgC;AAAA;AAAA,4DAAoBC,cAApB,CAAmC,CAAnC,CAAhC,EAAuE,GAAvE;AACA,iBAAKC,IAAL;AACH,WAHD;AAKA,eAAKC,WAAL;AACH;;AAEOA,QAAAA,WAAW,GAAS;AACxB,cAAIN,MAAM,GAAG,KAAKA,MAAlB;AACA,cAAI;AAAEO,YAAAA,WAAF;AAAeC,YAAAA;AAAf,cAA+BR,MAAnC;AAEAO,UAAAA,WAAW,CAACE,IAAZ,CAAiBC,EAAjB,CAAoB,QAApB,EAA8B,KAAKC,WAAnC,EAAgD,IAAhD;AACAH,UAAAA,WAAW,CAACC,IAAZ,CAAiBC,EAAjB,CAAoB,QAApB,EAA8B,KAAKE,WAAnC,EAAgD,IAAhD;AAEA,gBAAM;AAAEC,YAAAA,cAAF;AAAkBC,YAAAA;AAAlB,cAA0C;AAAA;AAAA,oCAASC,IAAzD;AACA;AAAA;AAAA,oCAASA,IAAT,CAAcC,aAAd,CAA4BH,cAA5B;AACA;AAAA;AAAA,oCAASE,IAAT,CAAcC,aAAd,CAA4BF,mBAA5B;AACAP,UAAAA,WAAW,CAACU,SAAZ,GAAwBJ,cAAxB;AACAL,UAAAA,WAAW,CAACS,SAAZ,GAAwBH,mBAAxB;AACH;;AAEOH,QAAAA,WAAW,CAACO,MAAD,EAAuB;AACtC;AAAA;AAAA,oCAASH,IAAT,CAAcC,aAAd,CAA4BE,MAAM,CAACD,SAAnC;AACH;;AAEOL,QAAAA,WAAW,CAACM,MAAD,EAAuB;AACtC;AAAA;AAAA,oCAASH,IAAT,CAAcI,kBAAd,CAAiCD,MAAM,CAACD,SAAxC;AACH;;AAvC2C,O;;AA0ChD;AAAA;AAAA,gDAAiBG,eAAjB;AAAA;AAAA,oCAA6C/B,eAA7C","sourcesContent":["\nimport { Toggle } from \"cc\";\nimport { AudioMgr } from \"../../core_tgx/base/AudioMgr\";\nimport { tgxModuleContext } from \"../../core_tgx/tgx\";\nimport { GameUILayers } from \"../../scripts/GameUILayers\";\nimport { UI_Setting } from \"../../scripts/UIDef\";\nimport { Layout_Setting } from \"./Layout_Setting\";\nimport { StormSunderAudioMgr } from \"../../module_storm_sunder/Script/Manager/StormSunderAudioMgr\";\n\nexport class UI_Setting_Impl extends UI_Setting {\n    constructor() {\n        super('ui_setting/UI_Setting', GameUILayers.POPUP, Layout_Setting);\n    }\n\n    public getRes(): [] {\n        return [];\n    }\n\n    protected onCreated(): void {\n        let layout = this.layout as Layout_Setting;\n        this.onButtonEvent(layout.btnClose, () => {\n            StormSunderAudioMgr.playOneShot(StormSunderAudioMgr.getMusicIdName(2), 1.0);\n            this.hide();\n        });\n\n        this.initilizeUI();\n    }\n\n    private initilizeUI(): void {\n        let layout = this.layout as Layout_Setting;\n        let { musicToggle, soundToggle } = layout;\n\n        musicToggle.node.on('toggle', this.musicSwitch, this);\n        soundToggle.node.on('toggle', this.soundSwitch, this);\n\n        const { bgMusicEnabled, soundEffectsEnabled } = AudioMgr.inst;\n        AudioMgr.inst.toggleBgMusic(bgMusicEnabled);\n        AudioMgr.inst.toggleBgMusic(soundEffectsEnabled);\n        musicToggle.isChecked = bgMusicEnabled;\n        soundToggle.isChecked = soundEffectsEnabled;\n    }\n\n    private musicSwitch(toggle: Toggle): void {\n        AudioMgr.inst.toggleBgMusic(toggle.isChecked);\n    }\n\n    private soundSwitch(toggle: Toggle): void {\n        AudioMgr.inst.toggleSoundEffects(toggle.isChecked);\n    }\n}\n\ntgxModuleContext.attachImplClass(UI_Setting, UI_Setting_Impl);"]}